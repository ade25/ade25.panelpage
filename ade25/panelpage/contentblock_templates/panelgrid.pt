<div class="contentblock-content">
    <div class="contentblock-header">
        <h2 class="contentblock-title"
            tal:condition="context/headline"
            tal:content="context/headline" />
        <p class="lead contentblock-teaser"
            tal:condition="context/Description"
            tal:content="context/Description" />
    </div>
    <tal:panels tal:condition="view/display_panelgrid">
        <div class="row contentblock-grid"
            tal:define="panels view/asigned_panels;">
            <tal:block tal:repeat="item panels">
                <div tal:attributes="class view/computed_klass">
                    <div tal:replace="structure python:view.rendered_panel(item)" />
                </div>
            </tal:block>
        </div>
    </tal:panels>
    <tal:block tal:condition="not:view/display_panelgrid">
        <div class="row ppe-row-eq-height">
            <tal:block tal:repeat="col view/stored_layout">
                <div tal:attributes="class string:col-xs-12 col-sm-${col/grid-col} xppe-col-visible"
                    tal:define="panel_type col/component;
                                uuid col/uuid;
                                item python:view.panel_item(uuid)">
                    <h6 tal:content="item/Title" />
                    <tal:body tal:condition="python:panel_type == 'text'">
                        <div tal:condition="item/text"
                            tal:replace="structure item/text/output" />
                    </tal:body>
                    <tal:body tal:condition="python:panel_type == 'image'">
                        <img tal:condition="item/image"
                            tal:define="scales item/@@images"
                            tal:replace="structure python: scales.tag('image', scale='preview', css_class='img-responsive')"
                            />
                    </tal:body>
                </div>
            </tal:block>
        </div>
    </tal:block>
</div>