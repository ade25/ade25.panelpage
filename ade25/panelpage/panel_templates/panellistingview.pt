<div class="contentpanel contentpanel-base"
  tal:attributes="class string:contentpanel contentpanel-base ${context/klass};
                  id string:contentpanel-${context/getId}">
  <div class="contentpanel-content">
    <div class="contentpanel-header" tal:condition="context/textline">
      <div class="contentpanel-title">
        <h3 tal:attributes="class string:contentpanel-subheading"
          tal:content="context/textline">Headline</h3>
      </div>
    </div>
    <div class="contentpanel-body"
      tal:condition="view/has_selection">
      <div tal:attributes="class string:contentpanel-listing ${context/list_layout} ${context/klass}">
        <tal:block tal:define="Batch python:modules['Products.CMFPlone'].Batch;
                               b_size python:int(request.get('b_size', 20));
                               b_start python:int(request.get('b_start', 0));
                               results view/get_contents;
                               batch python:Batch(results, b_size, b_start);
                               layout context/list_layout">
          <div class="media-item" tal:repeat="item results">
            <tal:image tal:condition="python:layout == 'pp-list-media'"
              tal:define="item_obj item/getObject;
                          scales item_obj/@@images;
                          thumbnail python: scales.scale('image', width=128, height=128);"
                tal:condition="thumbnail">
                <div class="media-item__aside">
                    <a class="media-item__image"
                            tal:attributes="href item/getURL">
                        <img class="media-object app-img"
                                tal:attributes="src thumbnail/url;
                                        width thumbnail/width;
                                        height thumbnail/height" />
                    </a>
                </div>
            </tal:image>
            <div class="media-item__main">
                <div class="media-item__content">
                    <h4 class="media-item__heading"><a tal:attributes="href item/getURL"
                             tal:content="item/Title" /></h4>
                    <p tal:condition="python:layout in ['pp-list-media', 'pp-list-summary']"><span tal:content="item/Description" />
                        <a tal:attributes="href item/getURL" i18n:translate="">more&hellip;</a>
                    </p>
                </div>
            </div>
          </div>
          <div metal:use-macro="context/batch_macros/macros/navigation" />
        </tal:block>
      </div>
    </div>
  </div>
</div>