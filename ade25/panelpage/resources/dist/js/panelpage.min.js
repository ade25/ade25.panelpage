/*!
* panelpage by Ade25
* Copyright Ade25
* Licensed under MIT.
*
* Designed and built by ade25
*/
if("undefined"==typeof jQuery)throw new Error("We require jQuery");!function(a){var b,c=a();a.fn.sortable=function(d){var e=String(d);return d=a.extend({connectWith:!1},d),this.each(function(){if(/^enable|disable|destroy$/.test(e)){var f=a(this).children(a(this).data("items")).attr("draggable","enable"==e);return void("destroy"==e&&f.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"))}var g,h,f=a(this).children(d.items),i=a("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');f.find(d.handle).mousedown(function(){g=!0}).mouseup(function(){g=!1}),a(this).data("items",d.items),c=c.add(i),d.connectWith&&a(d.connectWith).add(this).data("connectWith",d.connectWith),f.attr("draggable","true").on("dragstart.h5s",function(c){if(d.handle&&!g)return!1;g=!1;var e=c.originalEvent.dataTransfer;e.effectAllowed="move",e.setData("Text","dummy"),h=(b=a(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){b&&(b.removeClass("sortable-dragging").show(),c.detach(),h!=b.index()&&b.parent().trigger("sortupdate",{item:b}),b=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,i]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){return f.is(b)||d.connectWith===a(b).parent().data("connectWith")?"drop"==e.type?(e.stopPropagation(),c.filter(":visible").after(b),b.trigger("dragend.h5s"),!1):(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",f.is(this)?(d.forcePlaceholderSize&&i.height(b.outerHeight()),b.hide(),a(this)[i.index()<a(this).index()?"after":"before"](i),c.not(i).detach()):c.is(this)||a(this).children(d.items).length||(c.detach(),a(this).append(i)),!1):!0})})}}(jQuery),function(a){a(document).ready(function(){a('div[data-appui="editable"]').on({mouseenter:function(){a(this).find(".contentpanel-editbar").removeClass("fadeOutUp").addClass("fadeInLeft").show()},mouseleave:function(){a(this).find(".contentpanel-editbar").removeClass("fadeInLeft").addClass("fadeOutUp")}});var b=a(".ppe-section-sortable").sortable({items:".ppe-block-sortable",handle:".ppe-dragindicator"});b.length&&b.on("sortupdate",function(){var c=b.data("appui-ajax-uri"),d=a("#ppe-form-rearrange").serializeArray();a.ajax({url:c,data:d,context:document.body,success:function(b){if(b.success===!0){var c=b.message,d='<p class="text-warning">'+c+"</p>";a("#ppe-statusinfo-content").append(d).removeClass("hidden").slideDown("slow")}else console.log("Form could not be submitted. Bummer.")}})})})}(jQuery);